import test from 'ava';

import { stringifyTestVector, vmbTestGroupToVmbTests } from '../lib.js';

/* spell-checker: disable */
test('vmbTestGroupToVmbTests', (t) => {
  const result = vmbTestGroupToVmbTests([
    'Basic push operations',
    [
      [
        'OP_0',
        'OP_SIZE <0> OP_EQUAL',
        'OP_0 (A.K.A. OP_PUSHBYTES_0, OP_FALSE): zero is represented by an empty stack item',
      ],
      [
        'OP_PUSHBYTES_1',
        'OP_SIZE <1> OP_EQUAL',
        'OP_PUSHBYTES_1 with missing bytes',
        ['invalid'],
      ],
      [
        '<0>',
        'OP_DROP OP_TXINPUTCOUNT <1> OP_EQUAL',
        'OP_TXINPUTCOUNT operation exists',
        ['2021_invalid'],
      ],
    ],
  ]);
  t.deepEqual(
    result,
    [
      [
        [
          '606em',
          'Basic push operations: OP_0 (A.K.A. OP_PUSHBYTES_0, OP_FALSE): zero is represented by an empty stack item (nonP2SH)',
          'OP_0',
          'OP_SIZE <0> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e785000000000000000000000000000000000000000000000000000000000000000000000000010000000100000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac102700000000000003820087',
          ['2021_valid', '2022_valid'],
          1,
        ],
        [
          'm5vzq',
          'Basic push operations: OP_0 (A.K.A. OP_PUSHBYTES_0, OP_FALSE): zero is represented by an empty stack item (P2SH20)',
          'OP_0',
          'OP_SIZE <0> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e78500000000000000000000000000000000000000000000000000000000000000000000000001000000050003820087000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac102700000000000017a9146b14122b4b3cb280c9ec66f8e2827cf3384010a387',
          ['2021_standard', '2022_standard'],
          1,
        ],
      ],
      [
        [
          'cjtdh',
          'Basic push operations: OP_PUSHBYTES_1 with missing bytes (nonP2SH)',
          'OP_PUSHBYTES_1',
          'OP_SIZE <1> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e785000000000000000000000000000000000000000000000000000000000000000000000000010000000101000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac102700000000000003825187',
          ['2021_invalid', '2022_invalid'],
          1,
        ],
        [
          'urv4v',
          'Basic push operations: OP_PUSHBYTES_1 with missing bytes (P2SH20)',
          'OP_PUSHBYTES_1',
          'OP_SIZE <1> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e78500000000000000000000000000000000000000000000000000000000000000000000000001000000050103825187000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac102700000000000017a914348babd902f9237b6d28ad1ee00bf6941bc9bddc87',
          ['2021_invalid', '2022_invalid'],
          1,
        ],
      ],
      [
        [
          '30lcr',
          'Basic push operations: OP_TXINPUTCOUNT operation exists (nonP2SH)',
          '<0>',
          'OP_DROP OP_TXINPUTCOUNT <1> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e785000000000000000000000000000000000000000000000000000000000000000000000000010000000100000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac10270000000000000475c35187',
          ['2021_invalid', '2022_valid'],
          1,
        ],
        [
          '3gtat',
          'Basic push operations: OP_TXINPUTCOUNT operation exists (P2SH20)',
          '<0>',
          'OP_DROP OP_TXINPUTCOUNT <1> OP_EQUAL',
          '02000000020000000000000000000000000000000000000000000000000000000000000000000000006441016bef010b024a4ac48b0d37b6d68866fd5d878cf85e6778e913a43cece4e0c4a176f874b8d092619d67857d189f4b9542576b010687310490c538985edbb94cc32103a524f43d6166ad3567f18b0a5c769c6ab4dc02149f4d5095ccf4e8ffa293e7850000000000000000000000000000000000000000000000000000000000000000000000000100000006000475c35187000000000100000000000000000a6a08766d625f7465737400000000',
          '0210270000000000001976a91460011c6bf3f1dd98cff576437b9d85de780f497488ac102700000000000017a914e57b1d9d4512a857ac3c1623bceacfd2356463d187',
          ['2021_invalid', '2022_standard'],
          1,
        ],
      ],
    ],
    `Stringified test vector:\n${stringifyTestVector(result)}`
  );
});
